{
    "service": "crank-image-classifier",
    "description": "GPU-accelerated image classification worker service",
    "container_name": "crank-image-classifier",
    "build_context": ".",
    "dockerfile": "services/Dockerfile.crank-image-classifier-gpu",
    "dependencies": {
        "runtime_files": [
            "services/crank_image_classifier.py",
            "services/crank_cert_initialize.py"
        ],
        "requirements_file": "services/requirements-crank-image-classifier.txt",
        "configuration_files": [
            "services/crank-image-classifier-gpu.plugin.yaml"
        ],
        "shared_dependencies": [
            "shared/"
        ]
    },
    "environment": {
        "development": {
            "CRANK_ENVIRONMENT": "development",
            "LOG_LEVEL": "DEBUG",
            "IMAGE_CLASSIFIER_HTTPS_PORT": 8400,
            "CUDA_VISIBLE_DEVICES": "all",
            "CA_SERVICE_URL": "https://crank-cert-authority-dev:9090",
            "HTTPS_ONLY": "true"
        },
        "production": {
            "CRANK_ENVIRONMENT": "production",
            "LOG_LEVEL": "INFO",
            "IMAGE_CLASSIFIER_HTTPS_PORT": 8400,
            "CUDA_VISIBLE_DEVICES": "all",
            "CA_SERVICE_URL": "https://crank-cert-authority:9090",
            "HTTPS_ONLY": "true"
        }
    },
    "ports": {
        "https": 8400
    },
    "healthcheck": {
        "endpoint": "/health",
        "port": "https",
        "protocol": "https"
    },
    "volumes": {
        "development": [
            "./services:/app/services:ro",
            "./shared:/app/shared:ro"
        ],
        "production": []
    },
    "gpu_required": true,
    "gpu_config": {
        "driver": "nvidia",
        "count": "all",
        "capabilities": [
            "gpu"
        ]
    },
    "depends_on": [
        "crank-platform"
    ]
}