{
    "exchange": "heartbeat",
    "description": "Normal heartbeat sequence with connection reuse",
    "sequence": [
        {
            "request": {
                "method": "POST",
                "url": "https://controller:8000/api/workers/test-worker-1/heartbeat",
                "json": {
                    "worker_id": "test-worker-1",
                    "status": "healthy",
                    "uptime_seconds": 120.5
                },
                "timeout": 5.0
            },
            "response": {
                "status_code": 200,
                "json": {
                    "acknowledged": true
                }
            },
            "expected_client_state": {
                "http_client_created": true,
                "connection_reused": false,
                "requests_sent": 1
            }
        },
        {
            "request": {
                "method": "POST",
                "url": "https://controller:8000/api/workers/test-worker-1/heartbeat",
                "json": {
                    "worker_id": "test-worker-1",
                    "status": "healthy",
                    "uptime_seconds": 150.5
                },
                "timeout": 5.0
            },
            "response": {
                "status_code": 200,
                "json": {
                    "acknowledged": true
                }
            },
            "expected_client_state": {
                "http_client_created": true,
                "connection_reused": true,
                "requests_sent": 2
            }
        },
        {
            "request": {
                "method": "POST",
                "url": "https://controller:8000/api/workers/test-worker-1/heartbeat",
                "json": {
                    "worker_id": "test-worker-1",
                    "status": "healthy",
                    "uptime_seconds": 180.5
                },
                "timeout": 5.0
            },
            "response": {
                "status_code": 200,
                "json": {
                    "acknowledged": true
                }
            },
            "expected_client_state": {
                "http_client_created": true,
                "connection_reused": true,
                "requests_sent": 3
            }
        }
    ],
    "notes": "Tests connection pooling - httpx.AsyncClient reused across heartbeats"
}
